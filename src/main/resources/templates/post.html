<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >

<head>
	<title>iSTATUS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<link th:href="@{/styles/site.css}" rel="stylesheet" />
	<style>
	</style>
</head>

<body class="content">

	<nav th:replace="~{layouts/common :: navbar}"></nav>
	
	<h1>Post a Status!</h1>
	
	<!--
		th:action="@{/}"	for what controller method to execute
		th:object="${}"		for what object is binded to the form
		th:field="*{}"		for field inputs for the object being submitted		
	-->
	
	<form action="#" th:action="@{/post}" th:object="${status}" method="post">

		<div style="display:none;">
			<label>ID</label><input id="StatusIdInput" type="number" th:field="*{Id}" placeholder="" /><br/>
		</div>
		
		<label>Author</label><br/><input id="StatusAuthorInput" type="text" th:field="*{Author}" placeholder="Type name here" required /><br/>
			
		<label>Message</label><br/><textarea id="StatusMessageInput" type="text" th:field="*{Message}" placeholder="Type your message here" required /></textarea><br/>
				
		<label>Photo URL</label> <input id="StatusPhotoUrlInput" type="text" th:field="*{PhotoUrl}" placeholder="Type a photo url here"/><br/>
		
		<div style="display:none;">
			<label>Datetime</label> <input id="StatusDatetimeInput" type="text" th:field="*{Datetime}" placeholder="" /><br/>
		</div>
		
		<img class="PhotoPreview" style="display:block" id="PhotoPreview" th:src="${status.getPhotoUrl()}"/>
		
		<button id="SubmitStatusBtn" alt="Photo Preview" type="submit">Submit</button>
	</form>	

	<script>			
		var photoUrl = document.getElementById('StatusPhotoUrlInput');
		photoUrl.onchange = function () 
		{
			let url = photoUrl.value; 
			let photoPreview = document.getElementById('PhotoPreview');			 						
			if (url !== "")
			{				
				photoPreview.src = url; 
				photoPreview.style.display = "block"; 
			}
			else 
			{		
				photoPreview.style.display = "none"; 
			}
		}			
	</script>

</body>		
</html>